@startuml
title Cancelación de Turno

actor Cliente
participant "controlador : Controlador" as controlador
participant "turno : Turno" as turno

' 1. El cliente ingresa sus datos
Cliente -> controlador : ingresarDatos(nombre : string, apellido : string, tel : int, email : string)
activate controlador

controlador -> controlador : validarDatos(nombre, apellido, tel, email)


' 2. Cliente solicita cancelar turno
Cliente -> controlador : solicitarCancelacion()

controlador -> turno : consultarTurno()
activate turno
turno --> controlador : <<turnoEncontrado>>
deactivate turno

' 3. Verificación de la regla de 24 hs
controlador -> turno : verificarAnticipacion()
activate turno
turno --> controlador : <<enPlazo / fueraDePlazo>>
deactivate turno

alt Fuera de plazo (< 24 hs)
    controlador -> Cliente : <<error: "No puede cancelar con menos de 24 hs de anticipación">>

else En plazo (≥ 24 hs)
    controlador -> turno : cambiarEstado("Cancelado")
    activate turno
    turno --> controlador : <<estadoActualizado>>
    deactivate turno

    controlador -> Cliente : <<mensaje: "Turno cancelado correctamente">>
end

deactivate controlador
@enduml